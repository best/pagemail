# ===========================================
# Pagemail Configuration
# ===========================================
# Copy this file to .env and modify as needed

# ----- Docker User Mapping -----
# Set these to match your host user's UID/GID when using bind mounts
# Get your UID/GID with: id -u && id -g
PUID=1000
PGID=1000

# ----- Server -----
# Server listen address
SERVER_ADDR=:8080
# Environment: development, staging, production
SERVER_ENV=development

# ----- Database -----
# Database driver: postgres, sqlite
DB_DRIVER=postgres
# PostgreSQL connection string (used when DB_DRIVER=postgres)
DB_URL=postgres://pagemail:pagemail@localhost:5432/pagemail?sslmode=disable
# SQLite file path (used when DB_DRIVER=sqlite)
DB_SQLITE_PATH=./pagemail.db

# ----- JWT -----
# JWT secret key (generate with: openssl rand -base64 32)
JWT_SECRET=change-me-in-production
# JWT access token expiry (e.g., 15m, 1h, 24h)
JWT_ACCESS_EXPIRY=1h
# JWT refresh token expiry
JWT_REFRESH_EXPIRY=168h

# ----- Encryption -----
# AES-256-GCM encryption key for sensitive data (32 bytes, base64 encoded)
# Generate with: openssl rand -base64 32
ENCRYPTION_KEY=change-me-in-production-32-bytes

# ----- Storage -----
# Storage backend: local, s3
STORAGE_BACKEND=local
# Local storage path (used when STORAGE_BACKEND=local)
STORAGE_LOCAL_PATH=./storage

# S3/MinIO configuration (used when STORAGE_BACKEND=s3)
STORAGE_S3_ENDPOINT=
STORAGE_S3_REGION=us-east-1
STORAGE_S3_BUCKET=pagemail
STORAGE_S3_ACCESS_KEY=
STORAGE_S3_SECRET_KEY=
STORAGE_S3_USE_PATH_STYLE=false

# ----- SMTP (Global Default) -----
# Leave empty to disable global SMTP
SMTP_HOST=
SMTP_PORT=587
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_FROM_NAME=Pagemail
SMTP_FROM_EMAIL=
SMTP_USE_TLS=true

# ----- Capture -----
# Default viewport size
CAPTURE_VIEWPORT_WIDTH=1920
CAPTURE_VIEWPORT_HEIGHT=1080
# Default wait timeout in milliseconds
CAPTURE_WAIT_TIMEOUT=30000
# Maximum concurrent capture workers
CAPTURE_WORKERS=3

# ----- Queue -----
# Job polling interval in seconds
QUEUE_POLL_INTERVAL=5
# Maximum job retry attempts
QUEUE_MAX_RETRIES=3
# Job lease duration in seconds
QUEUE_LEASE_DURATION=300

# ----- Rate Limiting -----
# Requests per second per user
RATE_LIMIT_RPS=10
# Burst size
RATE_LIMIT_BURST=20

# ----- Logging -----
# Log level: debug, info, warn, error
LOG_LEVEL=info
# Log format: json, console
LOG_FORMAT=console

# ----- OpenTelemetry (Optional) -----
# OTLP endpoint for tracing
OTEL_EXPORTER_OTLP_ENDPOINT=
# Service name for tracing
OTEL_SERVICE_NAME=pagemail
